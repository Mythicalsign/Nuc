name: Nuclei â€“ single-target scan (target hard-coded in YAML)

on:
  workflow_dispatch:          # manual button only
  # push:                     # uncomment to trigger on every push

jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4   # only needed if you store custom templates

      - uses: actions/setup-go@v5
        with: { go-version: 'stable' }

      - name: Install Nuclei & templates
        run: |
          go install -v github.com/projectdiscovery/nuclei/v3/cmd/nuclei@latest
          nuclei -update-templates

      - name: Run Nuclei (target + config inside this YAML)
        run: |
          nuclei \
            -u "https://fetena.net" \
            -jsonl -o "nuclei.jsonl" \
            -json-export "nuclei.json" \
            -severity critical,high,medium \
            -rl 50 -c 15 -timeout 10 -retries 3 \
            -H "User-Agent: Nuclei-GHA-scanner/1.0" \
            -stats

      - name: Upload JSON reports
        uses: actions/upload-artifact@v4
        with:
          name: nuclei-reports
          path: |
            nuclei.json
            nuclei.jsonl
          retention-days: 30
